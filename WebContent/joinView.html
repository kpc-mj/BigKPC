<!DOCTYPE html>
<html>
<title>BIG KPC</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/w3.css">
<link rel="stylesheet"
	href="https://fonts.googleapis.com/css?family=Poppins">
<style>
body, h1, h2, h3, h4, h5 {
	font-family: "Poppins", sans-serif
}

body {
	font-size: 16px;
}

.w3-half img {
	margin-bottom: -6px;
	margin-top: 16px;
	opacity: 0.8;
	cursor: pointer
}

.w3-half img:hover {
	opacity: 1
}

div.container {
	width: 40%;
	margin-left: 30%;
	margin-right: 30%;
	margin-top: 5%;
	margin-bottom: 15%;
}
</style>
<body>
	<script type="text/javascript">
		function checkId() {
			var xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
					if(this.responseText == "t"){
						document.getElementById("id_error").value = "t";
						document.getElementById("id_error_view").innerText = "";
					}else{
						document.getElementById("id_error").value = "f";
						document.getElementById("id_error_view").innerText = this.responseText;
					}
				}
			};
			xhttp.open("POST", "joinCheck.do", true);
			xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
			xhttp.send("id=" + document.getElementById("id").value);
		}

		function checkPassword() {
			var xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
					if(this.responseText == "t"){
						document.getElementById("password_error").value = "t";
						document.getElementById("password_error_view").innerText = "";
					}else{
						document.getElementById("password_error").value = "f";
						document.getElementById("password_error_view").innerText = this.responseText;
					}
				}
			};
			xhttp.open("POST", "joinCheck.do", true);
			xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
			xhttp.send("password=" + document.getElementById("password").value);
		}

		function checkName() {
			var xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
					if(this.responseText == "t"){
						document.getElementById("name_error").value = "t";
						document.getElementById("name_error_view").innerText = "";
					}else{
						document.getElementById("name_error").value = "f";
						document.getElementById("name_error_view").innerText = this.responseText;
					}
				}
			};
			xhttp.open("POST", "joinCheck.do", true);
			xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
			xhttp.send("name=" + document.getElementById("name").value);
		}

		function checkAll() {
			checkId();
			checkPassword();
			checkName();
			if (document.getElementById("id_error").value == "t" && 
				document.getElementById("password_error").value == "t" &&
				document.getElementById("name_error").value == "t") {
				alert(document.getElementById("name").value + "님 가입을 축하합니다.");
				return true;
			} else {
				return false;
			}
		}
	</script>

	<!-- !PAGE CONTENT! -->
	<div class="w3-main">
		<!-- Header -->
		<div class="container" id="showcase">
			<h1 class="w3-jumbo w3-text-indigo">
				<b>BIG KPC.</b>
			</h1>
			<hr style="width: 50px; border: 5px solid #144169" class="w3-round">
			<form action="joinSuccess.do" onsubmit="return checkAll()" method="post">
				<div class="w3-section">
					<input class="w3-input w3-border" type="text" id="id" name="id"
						value="" placeholder="id" onchange="checkId()">
					<font color="red" id="id_error_view"></font><br>
					<input type="hidden" id="id_error" value="f">
				</div>
				<div class="w3-section">
					<input class="w3-input w3-border" type="password" id="password"
						name="password" value="" placeholder="password" onchange="checkPassword()">
					<font color="red" id="password_error_view"></font><br>
					<input type="hidden" id="password_error" value="f">
				</div>
				<div class="w3-section">
					<input class="w3-input w3-border" type="text" id="name"
						name="name" value="" placeholder="name" onchange="checkName()">
					<font color="red" id="name_error_view"></font><br>
					<input type="hidden" id="name_error" value="f">
				</div>
				<div class="w3-section">
					<button type="button" onclick="location.href='loginView.html'"
						class="w3-button w3-padding-large w3-margin-bottom"
						style="width: 50%; background-color: #6D6D6D">
						<font color="ffffff">Cancel</font>
					</button>
					<button type="submit"
						class="w3-button w3-padding-large w3-margin-bottom"
						style="width: 49%; background-color: #1F486E">
						<font color="ffffff">Join</font>
					</button>
				</div>
			</form>
		</div>
	</div>

	<!-- W3.CSS Container -->
		<div class="w3-light-grey w3-container w3-padding-32"
			style="margin-top: 75px;">
			<p class="w3-right"><font color="#8C8C8C">
				BIG KPC By<a class="w3-hover-opacity"> 'Three K'</a></font>
			</p>
		</div>
</body>
</html>